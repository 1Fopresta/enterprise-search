
#include "utf8-strings.h"

/**
 *	Bibliotek for å behandle strenger kodet med utf-8, med særskilt vekt på de europeiske tegnene.
 *
 *	(C) Copyright 2007-2008, SearchDaimon AS (Magnus Galåen)
 */


int	unicodeletter[628][2] = {
{65,90},{97,122},{170,0},{181,0},{186,0},{192,214},{216,246},{248,442},{443,0},{444,447},{448,451},{452,659},
{660,0},{661,687},{688,705},{710,721},{736,740},{748,0},{750,0},{837,0},{880,883},{884,0},{886,887},
{890,0},{891,893},{902,0},{904,906},{908,0},{910,929},{931,1013},{1015,1153},{1162,1315},{1329,1366},
{1369,0},{1377,1415},{1456,1469},{1471,0},{1473,1474},{1476,1477},{1479,0},{1488,1514},{1520,1522},{1552,1562},
{1569,1599},{1600,0},{1601,1610},{1611,1623},{1625,1630},{1646,1647},{1648,0},{1649,1747},{1749,0},{1750,1756},
{1761,1764},{1765,1766},{1767,1768},{1773,0},{1774,1775},{1786,1788},{1791,0},{1808,0},{1809,0},{1810,1839},
{1840,1855},{1869,1957},{1958,1968},{1969,0},{1994,2026},{2036,2037},{2042,0},{2305,2306},{2307,0},{2308,2361},
{2365,0},{2366,2368},{2369,2376},{2377,2380},{2384,0},{2392,2401},{2402,2403},{2417,0},{2418,0},{2427,2431},
{2433,0},{2434,2435},{2437,2444},{2447,2448},{2451,2472},{2474,2480},{2482,0},{2486,2489},{2493,0},{2494,2496},
{2497,2500},{2503,2504},{2507,2508},{2510,0},{2519,0},{2524,2525},{2527,2529},{2530,2531},{2544,2545},
{2561,2562},{2563,0},{2565,2570},{2575,2576},{2579,2600},{2602,2608},{2610,2611},{2613,2614},{2616,2617},
{2622,2624},{2625,2626},{2631,2632},{2635,2636},{2641,0},{2649,2652},{2654,0},{2672,2673},{2674,2676},
{2677,0},{2689,2690},{2691,0},{2693,2701},{2703,2705},{2707,2728},{2730,2736},{2738,2739},{2741,2745},
{2749,0},{2750,2752},{2753,2757},{2759,2760},{2761,0},{2763,2764},{2768,0},{2784,2785},{2786,2787},{2817,0},
{2818,2819},{2821,2828},{2831,2832},{2835,2856},{2858,2864},{2866,2867},{2869,2873},{2877,0},{2878,0},
{2879,0},{2880,0},{2881,2884},{2887,2888},{2891,2892},{2902,0},{2903,0},{2908,2909},{2911,2913},{2914,2915},
{2929,0},{2946,0},{2947,0},{2949,2954},{2958,2960},{2962,2965},{2969,2970},{2972,0},{2974,2975},{2979,2980},
{2984,2986},{2990,3001},{3006,3007},{3008,0},{3009,3010},{3014,3016},{3018,3020},{3024,0},{3031,0},{3073,3075},
{3077,3084},{3086,3088},{3090,3112},{3114,3123},{3125,3129},{3133,0},{3134,3136},{3137,3140},{3142,3144},
{3146,3148},{3157,3158},{3160,3161},{3168,3169},{3170,3171},{3202,3203},{3205,3212},{3214,3216},{3218,3240},
{3242,3251},{3253,3257},{3261,0},{3262,0},{3263,0},{3264,3268},{3270,0},{3271,3272},{3274,3275},{3276,0},
{3285,3286},{3294,0},{3296,3297},{3298,3299},{3330,3331},{3333,3340},{3342,3344},{3346,3368},{3370,3385},
{3389,0},{3390,3392},{3393,3396},{3398,3400},{3402,3404},{3415,0},{3424,3425},{3426,3427},{3450,3455},
{3458,3459},{3461,3478},{3482,3505},{3507,3515},{3517,0},{3520,3526},{3535,3537},{3538,3540},{3542,0},
{3544,3551},{3570,3571},{3585,3632},{3633,0},{3634,3635},{3636,3642},{3648,3653},{3654,0},{3661,0},{3713,3714},
{3716,0},{3719,3720},{3722,0},{3725,0},{3732,3735},{3737,3743},{3745,3747},{3749,0},{3751,0},{3754,3755},
{3757,3760},{3761,0},{3762,3763},{3764,3769},{3771,3772},{3773,0},{3776,3780},{3782,0},{3789,0},{3804,3805},
{3840,0},{3904,3911},{3913,3948},{3953,3966},{3967,0},{3968,3969},{3976,3979},{3984,3991},{3993,4028},
{4096,4138},{4139,4140},{4141,4144},{4145,0},{4146,4150},{4152,0},{4155,4156},{4157,4158},{4159,0},{4176,4181},
{4182,4183},{4184,4185},{4186,4189},{4190,4192},{4193,0},{4194,0},{4197,4198},{4199,4200},{4206,4208},
{4209,4212},{4213,4225},{4226,0},{4227,4228},{4229,4230},{4238,0},{4256,4293},{4304,4346},{4348,0},{4352,4441},
{4447,4514},{4520,4601},{4608,4680},{4682,4685},{4688,4694},{4696,0},{4698,4701},{4704,4744},{4746,4749},
{4752,4784},{4786,4789},{4792,4798},{4800,0},{4802,4805},{4808,4822},{4824,4880},{4882,4885},{4888,4954},
{4959,0},{4992,5007},{5024,5108},{5121,5740},{5743,5750},{5761,5786},{5792,5866},{5870,5872},{5888,5900},
{5902,5905},{5906,5907},{5920,5937},{5938,5939},{5952,5969},{5970,5971},{5984,5996},{5998,6000},{6002,6003},
{6016,6067},{6070,0},{6071,6077},{6078,6085},{6086,0},{6087,6088},{6103,0},{6108,0},{6176,6210},{6211,0},
{6212,6263},{6272,6312},{6313,0},{6314,0},{6400,6428},{6432,6434},{6435,6438},{6439,6440},{6441,6443},
{6448,6449},{6450,0},{6451,6456},{6480,6509},{6512,6516},{6528,6569},{6576,6592},{6593,6599},{6600,6601},
{6656,6678},{6679,6680},{6681,6683},{6912,6915},{6916,0},{6917,6963},{6965,0},{6966,6970},{6971,0},{6972,0},
{6973,6977},{6978,0},{6979,0},{6981,6987},{7040,7041},{7042,0},{7043,7072},{7073,0},{7074,7077},{7078,7079},
{7080,7081},{7086,7087},{7168,7203},{7204,7211},{7212,7219},{7220,7221},{7245,7247},{7258,7287},{7288,7293},
{7424,7467},{7468,7521},{7522,7543},{7544,0},{7545,7578},{7579,7615},{7680,7957},{7960,7965},{7968,8005},
{8008,8013},{8016,8023},{8025,0},{8027,0},{8029,0},{8031,8061},{8064,8116},{8118,8124},{8126,0},{8130,8132},
{8134,8140},{8144,8147},{8150,8155},{8160,8172},{8178,8180},{8182,8188},{8305,0},{8319,0},{8336,8340},
{8450,0},{8455,0},{8458,8467},{8469,0},{8473,8477},{8484,0},{8486,0},{8488,0},{8490,8493},{8495,8500},
{8501,8504},{8505,0},{8508,8511},{8517,8521},{8526,0},{8544,8578},{8579,8580},{8581,8584},{9398,9449},
{11264,11310},{11312,11358},{11360,11375},{11377,11388},{11389,0},{11392,11492},{11520,11557},{11568,11621},
{11631,0},{11648,11670},{11680,11686},{11688,11694},{11696,11702},{11704,11710},{11712,11718},{11720,11726},
{11728,11734},{11736,11742},{11744,11775},{11823,0},{12293,0},{12294,0},{12295,0},{12321,12329},{12337,12341},
{12344,12346},{12347,0},{12348,0},{12353,12438},{12445,12446},{12447,0},{12449,12538},{12540,12542},
{12543,0},{12549,12589},{12593,12686},{12704,12727},{12784,12799},{13312,19893},{19968,40899},{40960,40980},
{40981,0},{40982,42124},{42240,42507},{42508,0},{42512,42527},{42538,42539},{42560,42591},{42594,42605},
{42606,0},{42623,0},{42624,42647},{42775,42783},{42786,42863},{42864,0},{42865,42887},{42888,0},{42891,42892},
{43003,43009},{43011,43013},{43015,43018},{43020,43042},{43043,43044},{43045,43046},{43047,0},{43072,43123},
{43136,43137},{43138,43187},{43188,43203},{43274,43301},{43302,43306},{43312,43334},{43335,43345},{43346,0},
{43520,43560},{43561,43566},{43567,43568},{43569,43570},{43571,43572},{43573,43574},{43584,43586},{43587,0},
{43588,43595},{43596,0},{43597,0},{44032,55203},{63744,64045},{64048,64106},{64112,64217},{64256,64262},
{64275,64279},{64285,0},{64286,0},{64287,64296},{64298,64310},{64312,64316},{64318,0},{64320,64321},
{64323,64324},{64326,64433},{64467,64829},{64848,64911},{64914,64967},{65008,65019},{65136,65140},{65142,65276},
{65313,65338},{65345,65370},{65382,65391},{65392,0},{65393,65437},{65438,65439},{65440,65470},{65474,65479},
{65482,65487},{65490,65495},{65498,65500},{65536,65547},{65549,65574},{65576,65594},{65596,65597},{65599,65613},
{65616,65629},{65664,65786},{65856,65908},{66176,66204},{66208,66256},{66304,66334},{66352,66368},{66369,0},
{66370,66377},{66378,0},{66432,66461},{66464,66499},{66504,66511},{66513,66517},{66560,66639},{66640,66717},
{67584,67589},{67592,0},{67594,67637},{67639,67640},{67644,0},{67647,0},{67840,67861},{67872,67897},
{68096,0},{68097,68099},{68101,68102},{68108,68111},{68112,68115},{68117,68119},{68121,68147},{73728,74606},
{74752,74850},{119808,119892},{119894,119964},{119966,119967},{119970,0},{119973,119974},{119977,119980},
{119982,119993},{119995,0},{119997,120003},{120005,120069},{120071,120074},{120077,120084},{120086,120092},
{120094,120121},{120123,120126},{120128,120132},{120134,0},{120138,120144},{120146,120485},{120488,120512},
{120514,120538},{120540,120570},{120572,120596},{120598,120628},{120630,120654},{120656,120686},{120688,120712},
{120714,120744},{120746,120770},{120772,120779},{131072,173782},{194560,195101}};


// Is 'f' defined as a letter in unicode?
inline char U_isletter( int f )
{
    int         o[2] = {-1,-1};
    int         max = 628;
    int         size = max/2;
    int         pos = size, i;

    for (i=0; ; i++)
        {
            if (unicodeletter[pos][0] == f) return 1;
            if (f>=unicodeletter[pos][0] && f<=unicodeletter[pos][1]) return 1;

            o[i&1] = pos;

            size/= 2;
            if (size==0) size=1;

            if (f<unicodeletter[pos][0]) pos-= size;
            else if (f>unicodeletter[pos][0]) pos+= size;

            if (pos<0) pos = 0;
            else if (pos>=max) pos = max-1;

            if (pos==o[(i+1)&1]) return 0;
        }
}

